define(["require","jquery","json!ekyna-form/plugins","select2","jquery/form"],function(i,n,s){"use strict";n.fn.select2.defaults.set("theme","bootstrap"),n.fn.select2.defaults.set("width",null),document.querySelectorAll("textarea:not(.tinymce)").forEach(function(e){e.style.boxSizing="border-box",e.style.resize="none";const t=e.offsetHeight-e.clientHeight;e.addEventListener("input",function(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px"})});function o(e,t){this.$elem=n(e),this.options=t}o.prototype={constructor:o,getElement:function(){return this.$elem},init:function(e){let t={};e&&1===e.length&&(t.dropdownParent=e),this.$elem.find("select.select2").select2(t),this.$elem.on("submit",e=>{this.$elem.find('button[type="submit"]').each(function(){n(this).prop("disabled",!0).addClass("disabled").find(".glyphicon,.fa").replaceWith(n("<i></i>").addClass("fa fa-spinner fa-spin"))})}),n.each(s,(e,t)=>{let n=this.$elem;0<(n=n.is(e)?n:this.$elem.find(e)).length&&t.forEach(function(e){i([e],function(e){e.init(n)})})}),this.$elem.data("form",this)},destroy:function(){this.$elem.find("select.select2").select2("destroy"),n.each(s,(e,t)=>{let n=this.$elem;0<(n=n.is(e)?n:this.$elem.find(e)).length&&t.forEach(function(e){i([e],function(e){e.hasOwnProperty("destroy")&&e.destroy(n)})})})},save:function(){n.each(s,(e,t)=>{let n=this.$elem;0<(n=n.is(e)?n:this.$elem.find(e)).length&&t.forEach(function(e){i([e],function(e){e.hasOwnProperty("save")&&e.save(n)})})})}},n(".form-with-tabs input, .form-with-tabs textarea, .form-with-tabs select").on("invalid",function(e){var t=n(e.target).eq(0).parents(".tab-pane");t.length?r(t):e.preventDefault()});const e=n("form .has-error");function r(e){e.each(function(){const e=n('a[href="#'+n(this).attr("id")+'"]');1===e.length&&e.tab("show")})}return e.length&&r(e.eq(0).parents(".tab-pane")),{create:function(e,t){return new o(e,t)}}});