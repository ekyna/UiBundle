define(["require","jquery","json!ekyna-form/plugins","select2","jquery/form"],function(r,o,n){"use strict";o.fn.select2.defaults.set("theme","bootstrap"),o.fn.select2.defaults.set("width",null),document.querySelectorAll("textarea:not(.tinymce)").forEach(function(e){e.style.boxSizing="border-box",e.style.resize="none";var t=e.offsetHeight-e.clientHeight;e.addEventListener("input",function(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px"})});function i(e,t){this.$elem=o(e),this.options=t}i.prototype={constructor:i,getElement:function(){return this.$elem},init:function(e){var t={},i=(e&&1===e.length&&(t.dropdownParent=e),this.$elem.find("select.select2").select2(t),this);o.each(n,function(e,t){var n=i.$elem;0<(n=n.is(e)?n:i.$elem.find(e)).length&&o.each(t,function(e,t){r([t],function(e){e.init(n)})})}),this.$elem.data("form",this)},destroy:function(){this.$elem.find("select.select2").select2("destroy");var i=this;o.each(n,function(e,t){var n=i.$elem;0<(n=n.is(e)?n:i.$elem.find(e)).length&&o.each(t,function(e,t){r([t],function(e){e.hasOwnProperty("destroy")&&e.destroy(n)})})})},save:function(){var i=this;o.each(n,function(e,t){var n=i.$elem;0<(n=n.is(e)?n:i.$elem.find(e)).length&&o.each(t,function(e,t){r([t],function(e){e.hasOwnProperty("save")&&e.save(n)})})})}},o(".form-with-tabs input, .form-with-tabs textarea, .form-with-tabs select").on("invalid",function(e){var t=o(e.target).eq(0).parents(".tab-pane");t.length?s(t):e.preventDefault()});var e=o("form .has-error");function s(e){e.each(function(){var e=o('a[href="#'+o(this).attr("id")+'"]');1===e.length&&e.tab("show")})}return e.length&&s(e.eq(0).parents(".tab-pane")),{create:function(e,t){return new i(e,t)}}});