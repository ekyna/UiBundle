define(["jquery","routing","select2"],function(a,b){"use strict";var c={limit:10,route:null,route_params:[],allow_clear:!0};return a.fn.entitySearchWidget=function(){return this.each(function(){function d(){e.select2({allowClear:f.allow_clear,minimumInputLength:3,ajax:{delay:300,url:b.generate(f.route,f.route_params),dataType:"json",data:function(a){return{query:a.term,page:a.page,limit:f.limit}},processResults:function(a,b){return b.page=b.page||1,{results:a.results,pagination:{more:b.page*f.limit<a.total_count}}},escapeMarkup:function(a){return a}}})}var e=a(this),f=a.extend({},c,e.data("config"));d()}),this},{init:function(a){a.entitySearchWidget()}}});